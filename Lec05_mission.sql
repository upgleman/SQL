-- 05 서브쿼리
--[미션1] 중간고사 수학왕

-- students 테이블에는 학생들의 정보가, middle_test테이블에는 중간고사 점수가 기록되어 있습니다.

-- 1학년 5반 4번인 경민이가 자신의 중간고사 수학점수보다 더 높은 점수를 기록한 사람이 1, 2, 3학년중에 있는지 보고싶다고 하네요

-- 서브쿼리를 이용하여 경민이보다 높은 수학 점수를 기록한 학생이 1, 2, 3학년중에 있는지 조회해볼까요?

-- 지시사항
-- middle_test테이블에서 10504학번인 경민이보다 중간고사 수학점수를 높거나 같게 받은 학생들을 조회해 주세요.
-- middle_test 테이블과 students 테이블을 join하여 진행하셔야 합니다.

-- select * from students limit 5;
-- select * from middle_test limit 5;

-- 오답
-- select * from middle_test as A
-- join students as B
-- on A.student_id = B.student_id
-- where A.math >= ANY
-- (
-- select A.math from middle_test
-- where A.student_id = 10504
-- );

-- 1. 경민이보다 중간고사 수학점수를 높거나 같게 받은 학생들을 조회해 주세요.
 --메인 쿼리 정답
 
DESC students;
DESC middle_test;

select * from students;
select * from middle_test;
 
select * 
from middle_test as m
join students as s
on s.student_id = m.student_id
where m.math >= ANY
(
    select math
    from middle_test
    where student_id = 10504
);    
--서브쿼리

+------------+------------+------+-----+---------+-------+
| Field      | Type       | Null | Key | Default | Extra |
+------------+------------+------+-----+---------+-------+
| student_id | int(11)    | NO   | PRI | 0       |       |
| name       | varchar(7) | YES  |     | NULL    |       |
| grade      | int(11)    | YES  |     | NULL    |       |
| class      | int(11)    | YES  |     | NULL    |       |
| gender     | varchar(1) | YES  |     | NULL    |       |
+------------+------------+------+-----+---------+-------+
+------------+---------+------+-----+---------+-------+
| Field      | Type    | Null | Key | Default | Extra |
+------------+---------+------+-----+---------+-------+
| student_id | int(11) | NO   | PRI | 0       |       |
| kor        | int(11) | YES  |     | NULL    |       |
| math       | int(11) | YES  |     | NULL    |       |
| eng        | int(11) | YES  |     | NULL    |       |
+------------+---------+------+-----+---------+-------+

+------------+-----------+-------+-------+--------+
| student_id | name      | grade | class | gender |
+------------+-----------+-------+-------+--------+
|      10101 | 김재원    |     1 |     1 | M      |
|      10102 | 도서아    |     1 |     1 | F      |
|      10103 | 마성현    |     1 |     1 | M      |
|      10104 | 방윤성    |     1 |     1 | M      |
|      10105 | 방지연    |     1 |     1 | F      |
|      10106 | 배준호    |     1 |     1 | M      |
|      10107 | 소지성    |     1 |     1 | M      |
|      10108 | 손예서    |     1 |     1 | F      |
|      10109 | 양현수    |     1 |     1 | M      |
|      10110 | 엄은성    |     1 |     1 | M      |
|      10111 | 옥다연    |     1 |     1 | F      |
|      10112 | 옥지안    |     1 |     1 | F      |
|      10113 | 왕민서    |     1 |     1 | F      |
|      10114 | 위다인    |     1 |     1 | F      |
|      10115 | 유가은    |     1 |     1 | F      |
|      10116 | 윤도훈    |     1 |     1 | M      |
|      10117 | 제하린    |     1 |     1 | F      |
|      10118 | 조유빈    |     1 |     1 | F      |
|      10119 | 천도현    |     1 |     1 | M      |
|      10120 | 추은찬    |     1 |     1 | M      |
|      10201 | 곽서우    |     1 |     2 | F      |
|      10202 | 김율      |     1 |     2 | M      |
|      10203 | 노수현    |     1 |     2 | F      |
|      10204 | 소승준    |     1 |     2 | M      |
|      10205 | 안승아    |     1 |     2 | F      |
|      10206 | 안유나    |     1 |     2 | F      |
|      10207 | 양지원    |     1 |     2 | M      |
|      10208 | 용서은    |     1 |     2 | F      |
|      10209 | 우예나    |     1 |     2 | F      |
|      10210 | 유준배    |     1 |     2 | M      |
|      10211 | 육세은    |     1 |     2 | F      |
|      10212 | 은지원    |     1 |     2 | F      |
|      10213 | 장수민    |     1 |     2 | F      |
|      10214 | 진민규    |     1 |     2 | M      |
|      10215 | 천승민    |     1 |     2 | M      |
|      10216 | 편현서    |     1 |     2 | M      |
|      10217 | 허소민    |     1 |     2 | F      |
|      10218 | 허은성    |     1 |     2 | M      |
|      10219 | 황도윤    |     1 |     2 | M      |
|      10220 | 황승준    |     1 |     2 | M      |
|      10301 | 강세은    |     1 |     3 | F      |
|      10302 | 강정민    |     1 |     3 | M      |
|      10303 | 공현서    |     1 |     3 | F      |
|      10304 | 석지유    |     1 |     3 | F      |
|      10305 | 선서준    |     1 |     3 | M      |
|      10306 | 성서우    |     1 |     3 | F      |
|      10307 | 어아영    |     1 |     3 | F      |
|      10308 | 여도현    |     1 |     3 | M      |
|      10309 | 여지윤    |     1 |     3 | F      |
|      10310 | 연태현    |     1 |     3 | M      |
|      10311 | 염유정    |     1 |     3 | F      |
|      10312 | 임소율    |     1 |     3 | F      |
|      10313 | 임연서    |     1 |     3 | F      |
|      10314 | 장동현    |     1 |     3 | M      |
|      10315 | 장석준    |     1 |     3 | M      |
|      10316 | 장유찬    |     1 |     3 | M      |
|      10317 | 진도윤    |     1 |     3 | M      |
|      10318 | 진채은    |     1 |     3 | F      |
|      10319 | 하연우    |     1 |     3 | M      |
|      10320 | 현민혁    |     1 |     3 | M      |
|      10401 | 김태희    |     1 |     4 | F      |
|      10402 | 나소연    |     1 |     4 | F      |
|      10403 | 남지원    |     1 |     4 | M      |
|      10404 | 마하율    |     1 |     4 | M      |
|      10405 | 변시온    |     1 |     4 | M      |
|      10406 | 안서우    |     1 |     4 | F      |
|      10407 | 양나연    |     1 |     4 | F      |
|      10408 | 양재윤    |     1 |     4 | M      |
|      10409 | 오민서    |     1 |     4 | F      |
|      10410 | 용태윤    |     1 |     4 | M      |
|      10411 | 용현우    |     1 |     4 | M      |
|      10412 | 원민찬    |     1 |     4 | M      |
|      10413 | 유하은    |     1 |     4 | F      |
|      10414 | 임유정    |     1 |     4 | F      |
|      10415 | 임재현    |     1 |     4 | M      |
|      10416 | 장강민    |     1 |     4 | M      |
|      10417 | 주시연    |     1 |     4 | F      |
|      10418 | 차서하    |     1 |     4 | F      |
|      10419 | 함예빈    |     1 |     4 | F      |
|      10420 | 황준      |     1 |     4 | M      |
|      10501 | 권하윤    |     1 |     5 | F      |
|      10502 | 기민호    |     1 |     5 | M      |
|      10503 | 기윤호    |     1 |     5 | M      |
|      10504 | 김경민    |     1 |     5 | M      |
|      10505 | 나소민    |     1 |     5 | F      |
|      10506 | 모수빈    |     1 |     5 | F      |
|      10507 | 문은성    |     1 |     5 | M      |
|      10508 | 반민채    |     1 |     5 | F      |
|      10509 | 손유준    |     1 |     5 | M      |
|      10510 | 옥지후    |     1 |     5 | M      |
|      10511 | 우수현    |     1 |     5 | M      |
|      10512 | 유예나    |     1 |     5 | F      |
|      10513 | 은승우    |     1 |     5 | M      |
|      10514 | 전지안    |     1 |     5 | M      |
|      10515 | 제지우    |     1 |     5 | F      |
|      10516 | 조유주    |     1 |     5 | F      |
|      10517 | 지우진    |     1 |     5 | M      |
|      10518 | 차지현    |     1 |     5 | F      |
|      10519 | 하유나    |     1 |     5 | F      |
|      10520 | 홍현서    |     1 |     5 | F      |
|      20101 | 강승현    |     2 |     1 | M      |
|      20102 | 고예찬    |     2 |     1 | M      |
|      20103 | 권다윤    |     2 |     1 | F      |
|      20104 | 길태현    |     2 |     1 | M      |
|      20105 | 남소연    |     2 |     1 | F      |
|      20106 | 노은서    |     2 |     1 | F      |
|      20107 | 맹예서    |     2 |     1 | F      |
|      20108 | 선지훈    |     2 |     1 | M      |
|      20109 | 심소율    |     2 |     1 | F      |
|      20110 | 양예빈    |     2 |     1 | F      |
|      20111 | 왕소은    |     2 |     1 | F      |
|      20112 | 윤지아    |     2 |     1 | F      |
|      20113 | 정민혁    |     2 |     1 | M      |
|      20114 | 정시윤    |     2 |     1 | M      |
|      20115 | 제준우    |     2 |     1 | M      |
|      20116 | 채시연    |     2 |     1 | F      |
|      20117 | 최건우    |     2 |     1 | M      |
|      20118 | 현지성    |     2 |     1 | M      |
|      20119 | 홍예림    |     2 |     1 | F      |
|      20120 | 홍은우    |     2 |     1 | M      |
|      20201 | 공예준    |     2 |     2 | M      |
|      20202 | 구민우    |     2 |     2 | M      |
|      20203 | 권도윤    |     2 |     2 | M      |
|      20204 | 기시원    |     2 |     2 | M      |
|      20205 | 나은호    |     2 |     2 | M      |
|      20206 | 노재민    |     2 |     2 | M      |
|      20207 | 마수현    |     2 |     2 | F      |
|      20208 | 백재현    |     2 |     2 | M      |
|      20209 | 소가은    |     2 |     2 | F      |
|      20210 | 신지은    |     2 |     2 | F      |
|      20211 | 용유정    |     2 |     2 | F      |
|      20212 | 인연서    |     2 |     2 | F      |
|      20213 | 정나윤    |     2 |     2 | F      |
|      20214 | 조세은    |     2 |     2 | F      |
|      20215 | 주지율    |     2 |     2 | F      |
|      20216 | 진지원    |     2 |     2 | M      |
|      20217 | 차준서    |     2 |     2 | M      |
|      20218 | 표윤우    |     2 |     2 | M      |
|      20219 | 허지연    |     2 |     2 | F      |
|      20220 | 현서윤    |     2 |     2 | F      |
|      20301 | 곽서은    |     2 |     3 | F      |
|      20302 | 구예찬    |     2 |     3 | M      |
|      20303 | 기서희    |     2 |     3 | F      |
|      20304 | 남혜원    |     2 |     3 | F      |
|      20305 | 방수호    |     2 |     3 | M      |
|      20306 | 방현수    |     2 |     3 | M      |
|      20307 | 백지원    |     2 |     3 | F      |
|      20308 | 석서현    |     2 |     3 | F      |
|      20309 | 양승준    |     2 |     3 | M      |
|      20310 | 연시현    |     2 |     3 | F      |
|      20311 | 오채아    |     2 |     3 | F      |
|      20312 | 유승호    |     2 |     3 | M      |
|      20313 | 유예성    |     2 |     3 | M      |
|      20314 | 유지원    |     2 |     3 | F      |
|      20315 | 윤규리    |     2 |     3 | F      |
|      20316 | 윤지환    |     2 |     3 | M      |
|      20317 | 전수현    |     2 |     3 | M      |
|      20318 | 조승준    |     2 |     3 | M      |
|      20319 | 주유정    |     2 |     3 | F      |
|      20320 | 편윤호    |     2 |     3 | M      |
|      20401 | 곽성준    |     2 |     4 | M      |
|      20402 | 나승호    |     2 |     4 | M      |
|      20403 | 남시원    |     2 |     4 | M      |
|      20404 | 배지호    |     2 |     4 | M      |
|      20405 | 백민석    |     2 |     4 | M      |
|      20406 | 변수연    |     2 |     4 | F      |
|      20407 | 선서우    |     2 |     4 | F      |
|      20408 | 성현준    |     2 |     4 | M      |
|      20409 | 소채린    |     2 |     4 | F      |
|      20410 | 송태희    |     2 |     4 | F      |
|      20411 | 신재윤    |     2 |     4 | M      |
|      20412 | 신태희    |     2 |     4 | F      |
|      20413 | 엄수현    |     2 |     4 | M      |
|      20414 | 오시은    |     2 |     4 | F      |
|      20415 | 옥정민    |     2 |     4 | M      |
|      20416 | 옥채아    |     2 |     4 | F      |
|      20417 | 장승현    |     2 |     4 | M      |
|      20418 | 주시은    |     2 |     4 | F      |
|      20419 | 진수민    |     2 |     4 | F      |
|      20420 | 홍승아    |     2 |     4 | F      |
|      20501 | 곽승아    |     2 |     5 | F      |
|      20502 | 구현준    |     2 |     5 | M      |
|      20503 | 국소은    |     2 |     5 | F      |
|      20504 | 나서우    |     2 |     5 | M      |
|      20505 | 남사랑    |     2 |     5 | F      |
|      20506 | 반다연    |     2 |     5 | F      |
|      20507 | 반서준    |     2 |     5 | M      |
|      20508 | 방예빈    |     2 |     5 | F      |
|      20509 | 방재윤    |     2 |     5 | M      |
|      20510 | 석준혁    |     2 |     5 | M      |
|      20511 | 설예찬    |     2 |     5 | M      |
|      20512 | 성지현    |     2 |     5 | F      |
|      20513 | 송유나    |     2 |     5 | F      |
|      20514 | 엄예지    |     2 |     5 | F      |
|      20515 | 임연서    |     2 |     5 | F      |
|      20516 | 임현수    |     2 |     5 | M      |
|      20517 | 조강민    |     2 |     5 | M      |
|      20518 | 지서우    |     2 |     5 | M      |
|      20519 | 표아윤    |     2 |     5 | F      |
|      20520 | 홍규민    |     2 |     5 | M      |
|      30101 | 구민규    |     3 |     1 | M      |
|      30102 | 권연우    |     3 |     1 | F      |
|      30103 | 마하율    |     3 |     1 | F      |
|      30104 | 맹하준    |     3 |     1 | M      |
|      30105 | 박지율    |     3 |     1 | M      |
|      30106 | 방민채    |     3 |     1 | F      |
|      30107 | 소지완    |     3 |     1 | M      |
|      30108 | 신한결    |     3 |     1 | M      |
|      30109 | 염사랑    |     3 |     1 | F      |
|      30110 | 위준영    |     3 |     1 | M      |
|      30111 | 유서진    |     3 |     1 | M      |
|      30112 | 인도현    |     3 |     1 | M      |
|      30113 | 전유빈    |     3 |     1 | F      |
|      30114 | 제유정    |     3 |     1 | F      |
|      30115 | 조서율    |     3 |     1 | F      |
|      30116 | 조지민    |     3 |     1 | M      |
|      30117 | 주지민    |     3 |     1 | F      |
|      30118 | 지윤지    |     3 |     1 | F      |
|      30119 | 탁규민    |     3 |     1 | M      |
|      30120 | 황지연    |     3 |     1 | F      |
|      30201 | 고규리    |     3 |     2 | F      |
|      30202 | 권하연    |     3 |     2 | F      |
|      30203 | 금예준    |     3 |     2 | M      |
|      30204 | 길도현    |     3 |     2 | M      |
|      30205 | 길민우    |     3 |     2 | M      |
|      30206 | 마준혁    |     3 |     2 | M      |
|      30207 | 방하준    |     3 |     2 | M      |
|      30208 | 양시현    |     3 |     2 | M      |
|      30209 | 옥윤성    |     3 |     2 | M      |
|      30210 | 임율      |     3 |     2 | M      |
|      30211 | 장서은    |     3 |     2 | F      |
|      30212 | 정연서    |     3 |     2 | F      |
|      30213 | 조지원    |     3 |     2 | M      |
|      30214 | 진소율    |     3 |     2 | F      |
|      30215 | 채수현    |     3 |     2 | F      |
|      30216 | 탁다윤    |     3 |     2 | F      |
|      30217 | 탁소율    |     3 |     2 | F      |
|      30218 | 편규민    |     3 |     2 | M      |
|      30219 | 표예지    |     3 |     2 | F      |
|      30220 | 하지민    |     3 |     2 | F      |
|      30301 | 구민찬    |     3 |     3 | M      |
|      30302 | 국소은    |     3 |     3 | F      |
|      30303 | 김태민    |     3 |     3 | M      |
|      30304 | 문다인    |     3 |     3 | F      |
|      30305 | 문채린    |     3 |     3 | F      |
|      30306 | 방준영    |     3 |     3 | M      |
|      30307 | 서민서    |     3 |     3 | F      |
|      30308 | 설선우    |     3 |     3 | M      |
|      30309 | 신지율    |     3 |     3 | F      |
|      30310 | 심승아    |     3 |     3 | F      |
|      30311 | 양민찬    |     3 |     3 | M      |
|      30312 | 어준희    |     3 |     3 | M      |
|      30313 | 어지원    |     3 |     3 | F      |
|      30314 | 연우진    |     3 |     3 | M      |
|      30315 | 염지수    |     3 |     3 | F      |
|      30316 | 우유빈    |     3 |     3 | F      |
|      30317 | 정수현    |     3 |     3 | M      |
|      30318 | 주태윤    |     3 |     3 | M      |
|      30319 | 천윤지    |     3 |     3 | F      |
|      30320 | 탁성준    |     3 |     3 | M      |
|      30401 | 강지안    |     3 |     4 | M      |
|      30402 | 구수호    |     3 |     4 | M      |
|      30403 | 김소율    |     3 |     4 | F      |
|      30404 | 류나윤    |     3 |     4 | F      |
|      30405 | 맹규리    |     3 |     4 | F      |
|      30406 | 변이준    |     3 |     4 | M      |
|      30407 | 손준희    |     3 |     4 | M      |
|      30408 | 신하연    |     3 |     4 | F      |
|      30409 | 양도현    |     3 |     4 | M      |
|      30410 | 양채아    |     3 |     4 | F      |
|      30411 | 어수호    |     3 |     4 | M      |
|      30412 | 우우진    |     3 |     4 | M      |
|      30413 | 육하윤    |     3 |     4 | F      |
|      30414 | 윤예나    |     3 |     4 | F      |
|      30415 | 제예서    |     3 |     4 | F      |
|      30416 | 주시연    |     3 |     4 | F      |
|      30417 | 차소은    |     3 |     4 | F      |
|      30418 | 채은호    |     3 |     4 | M      |
|      30419 | 함재윤    |     3 |     4 | M      |
|      30420 | 현태현    |     3 |     4 | M      |
|      30501 | 강현수    |     3 |     5 | M      |
|      30502 | 고지성    |     3 |     5 | M      |
|      30503 | 곽채린    |     3 |     5 | F      |
|      30504 | 구민혁    |     3 |     5 | M      |
|      30505 | 노하율    |     3 |     5 | F      |
|      30506 | 도지환    |     3 |     5 | M      |
|      30507 | 방은우    |     3 |     5 | M      |
|      30508 | 방하율    |     3 |     5 | F      |
|      30509 | 배준서    |     3 |     5 | M      |
|      30510 | 설서현    |     3 |     5 | F      |
|      30511 | 여수아    |     3 |     5 | F      |
|      30512 | 연우빈    |     3 |     5 | M      |
|      30513 | 은한결    |     3 |     5 | M      |
|      30514 | 전승준    |     3 |     5 | M      |
|      30515 | 조다연    |     3 |     5 | F      |
|      30516 | 진다연    |     3 |     5 | F      |
|      30517 | 채채윤    |     3 |     5 | F      |
|      30518 | 허사랑    |     3 |     5 | F      |
|      30519 | 허유빈    |     3 |     5 | F      |
|      30520 | 황미원    |     3 |     5 | M      |
+------------+-----------+-------+-------+--------+

+------------+------+------+------+------------+-----------+-------+-------+--------+
| student_id | kor  | math | eng  | student_id | name      | grade | class | gender |
+------------+------+------+------+------------+-----------+-------+-------+--------+
|      10101 |  100 |  100 |  100 |      10101 | 김재원    |     1 |     1 | M      |
|      10103 |   96 |   96 |   93 |      10103 | 마성현    |     1 |     1 | M      |
|      10315 |  100 |  100 |   98 |      10315 | 장석준    |     1 |     3 | M      |
|      10504 |   12 |   96 |   21 |      10504 | 김경민    |     1 |     5 | M      |
|      10511 |   91 |   98 |   88 |      10511 | 우수현    |     1 |     5 | M      |
|      20120 |   73 |   97 |   72 |      20120 | 홍은우    |     2 |     1 | M      |
|      30403 |   90 |   96 |   87 |      30403 | 김소율    |     3 |     4 | F      |
+------------+------+------+------+------------+-----------+-------+-------+--------+
